#### 支付模块

##### 服务拆分的思想进行项目结构的物理层面整理 此项目主要对外提供支付功能 支付回调功能 支付日志功能

* 1 预支付接口
   * 1.1 发起方在支付之前先调用此接口获取支付单号 并修改订单号到支付中状态
      * 1.1.1 描述：预支付接口..参数加密方式 md5 密文数据库中存储
      * 1.1.2 概要: 调用预支付接口..预支付接口修改订单状态到支付中..如果修改失败返回错误..修改成功返回支付单号
      
* 2 回调逻辑
    * 2.1 接收第三方平台的支付回掉
       * 2.1.1 描述：app支付完成后..第三方会异步的同步的回调我们的回调接口
       * 2.1.2 概要：首先记录日志..记录日志不需要事务支持 日志方法需要包裹数据解析方法
       * 2.1.3 概要：解析数据 需要事务支持..进行订单状态修改.. 调用日志系统记录日志
       * 2.1.4 概要：记录日志.. 添加回调次数..判断是否超出最大回调次数 超过回调次数后将返回成功
* 3 手动触发回调逻辑
    * 3.1 手动触发回调逻辑
      * 3.1.1 描述：某些可能由于数据问题。逻辑问题导致回调流程断层..修改数据或者代码后需要让流程继续
      * 3.1.2 概要：查询出超过次数而且回调失败的回调记录..调用回调的方法..续接流程
    * 3.2 查询回调失败的记录
      * 3.2.1 描述：查询出超出次数的回调记录 主要是为了方便3.1 功能
   
   
